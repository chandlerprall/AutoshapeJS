(function(){function i(){j||(AutoshapeJS.attach(),j=!0)}function l(){if(!j){try{document.documentElement.doScroll("left")}catch(a){setTimeout(l,1);return}i()}}window.AutoshapeJS=new function(){var a,b,e,k,g,i;a={SHAPE:/shape-[\S]+/,BORDERRADIUS:/border-(?:(?:top|bottom)-(?:left|right)-){0,1}radius/,CALCULATESIZE:/^(\()?([\d]+)(.*?)(\))?$/,ISATTACHED:/(^|\s)attached(\s|$)/};this.VERSION=".1";this.AUTHOR="Chandler Prall <chandler.prall@gmail.com>";b={Shape:function(){}};b.Shape.prototype.init=function(c){this.mergeAttributes(c); this.element=document.createElement("DIV");this.setStyle("display","inline-block");this.setStyle("border-style","solid");this.setStyle("border-width","0");this.render()};b.Shape.prototype.attributes={rotate:function(c){this.setStyle("rotate",c+"deg")},opacity:"opacity",color:"color",transformorigin:function(c){this.setStyle("transform-origin",c.replace(/\|/g," "))},position:"position",left:function(c){this.setStyle("left",this.calculateSize(c,"%d"))},top:function(c){this.setStyle("top",this.calculateSize(c, "%d"))}};b.Shape.prototype.config={rotate:0,opacity:1,color:"black",transformorigin:"50% 50%",position:"relative",left:"auto",top:"top"};b.Shape.prototype.mergeAttributes=function(c){this.attributes=k(this._extended.attributes,this.attributes);this.config=k(this._extended.config,this.config,typeof c==="object"?c:{})};b.Shape.prototype.setStyle=function(c,f){var d=this.element;if(a.BORDERRADIUS.test(c))return c=i(c),d.style["Moz"+c.charAt(0).toUpperCase()+c.slice(1)]=f,d.style["Webkit"+c.charAt(0).toUpperCase()+ c.slice(1)]=f,d.style[c]=f,!0;if(c==="rotate")return d.style.MozTransform=d.style.WebkitTransform=d.style.OTransform=d.style.msTransform=d.style.transform="rotate("+f+")",!0;if(c==="transform-origin")return d.style.MozTransformOrigin=d.style.WebkitTransformOrigin=d.style.OTransformOrigin=d.style.msTransformOrigin=d.style.transformOrigin=f,!0;d.style[i(c)]=f;return!0};b.Shape.prototype.calculateSize=function(c,f,d){var h,b;if(typeof c==="undefined"||typeof f==="undefined")return!1;h=c.match(a.CALCULATESIZE); if(h===null)return 0;c=h[2];b=h[3].length>0?h[3]:"px";h[1]==="("&&h[4]===")"&&(c*=-1);f=f.replace(RegExp(d||"%d","g"),c);return eval(f)+b};b.Shape.prototype.set=function(c,f){this.config[c]=f;this.render()};b.Shape.prototype.get=function(c){return c in this.config?this.config[c]:this.element.style.getAttribute(c)};b.Shape.prototype.render=function(){var c,f;if(typeof this.element==="undefined")return!1;for(c in this.attributes)switch(f=this.attributes[c],typeof f){case "string":this.setStyle(this.attributes[c], this.config[c]);break;case "function":f.call(this,this.config[c])}};b.Shape.prototype.attachTo=function(c){if(typeof c==="undefined")return!1;typeof c==="string"&&(c=document.getElementById(c));if(typeof c.appendChild==="undefined")return!1;c.appendChild(this.element)};var j=document.getElementsByClassName||function f(d){d instanceof RegExp||(d=RegExp("(^|\\W)"+d+"($|\\W)"));var a=[];d.test(this.className)&&a.push(this);for(var b=0;b<this.childNodes.length;b++)a=a.concat(f.call(this.childNodes[b], d));return a};e=function(f,d){var a,b,e;if(typeof f!=="function"||typeof f.prototype==="undefined")return!1;if(typeof d!=="object")return!1;a=function(){};a.prototype=new f;a.prototype._extended=f.prototype;for(b in d)e=d[b],a.prototype[b]=e,typeof e==="function"&&typeof f.prototype[b]!=="undefined"&&function(f,a,d){f.prototype[d]._super=function(f){var b=Array.prototype.slice.call(arguments,1);a.prototype[d].apply(f,b)}}(a,f,b);return a};k=function(){var f,a,b,e={};for(f=0;f<arguments.length;f++)if(a= arguments[f],typeof a==="object")for(b in a)e[b]=a[b];return e};g=function(a){var b={},a=a.split("-"),h,e;a.shift();h=a.shift();if(typeof h==="undefined")return!1;b.shape=h.substr(0,1).toUpperCase()+h.substr(1).toLowerCase();for(h=0;h<a.length;h++)e=a[h],e=e.split(":"),e.length===2&&(b[e[0]]=e[1]);return b};i=function(a){return a.replace(/-(\w)/g,function(a,b){return b.toUpperCase()})};this.defineShape=function(a,d){if(typeof b[a]!=="undefined")return!1;b[a]=e(b[typeof d.base==="undefined"?"Shape": d.base],d)};this.createShape=function(a){typeof a==="string"&&(a=g(a));if(typeof a.shape==="undefined")return!1;if(typeof b[a.shape]==="undefined")return!1;var d=new b[a.shape];d.init(a);return d};this.attach=function(){var b,d,e,g;b=j.call(document,"autoshape");for(d=0;d<b.length;d++)if(e=b[d],(g=e.className.match(a.SHAPE))&&!a.ISATTACHED.test(e.className))g=this.createShape(g[0]),typeof g.attachTo!=="undefined"&&(g.attachTo(e),e.className+=" attached")}};AutoshapeJS.defineShape("Box",{attributes:{height:"height", width:"width",color:"background-color",borderwidth:"border-width",bordercolor:"border-color"},config:{height:"30px",width:"50px",borderwidth:"0px",bordercolor:"black"}});AutoshapeJS.defineShape("Circle",{attributes:{radius:function(a){this.setStyle("height",this.calculateSize(a,"%d * 2"));this.setStyle("width",this.calculateSize(a,"%d * 2"));this.setStyle("border-radius",this.calculateSize(a,"%d"))},color:"background-color",borderwidth:"border-width",bordercolor:"border-color"},config:{radius:"25px", borderwidth:"0px",bordercolor:"black"}});AutoshapeJS.defineShape("Complex",{init:function(a){var b,e;arguments.callee._super(this);this.setStyle("position","relative");this.children=[];for(b=0;b<a.length;b++)e=a[b],e=AutoshapeJS.createShape(e),e.attachTo(this.element);this.render()},render:function(){var a;if(!(this.children instanceof Array))return!1;for(a=0;a<this.children.length;a++)this.children[a].render();arguments.callee._super(this)}});AutoshapeJS.defineShape("Eclipse",{attributes:{radius:function(a){this.setStyle("height", this.calculateSize(a,"%d * 2"));this.setStyle("width",this.calculateSize(a,"%d * 2"));this.setStyle("border-radius",a)},color:function(a){a=a.replace(/\|/g," ");this.setStyle("border-color",a)},width:function(a){a=a.replace(/\|/g," ");this.setStyle("border-width",a)}},config:{radius:"25px",width:"1px|0|0|0"}});AutoshapeJS.defineShape("Polygon",{base:"Complex",init:function(a){var b,e,g;this.mergeAttributes(a);b=[];e=this.calculateSize(this.config.radius,"2 * %d * Math.tan(Math.PI/"+this.config.sides+ ")");for(g=0;g<this.config.sides;g++)b.push({shape:"Box",color:this.config.color,height:this.calculateSize(this.config.radius,"%d"),width:e,rotate:360/this.config.sides*g+180,transformorigin:"50% 100%",position:"absolute",left:this.calculateSize(this.config.radius,"%d - ("+parseInt(e)+" / 2)"),top:"0%"});arguments.callee._super(this,b)},attributes:{radius:function(a){this.setStyle("height",this.calculateSize(a,"%d * 2"));this.setStyle("width",this.calculateSize(a,"%d * 2"))}},config:{radius:"20px", sides:5},render:function(){arguments.callee._super(this);this.setStyle("height",this.calculateSize(this.config.radius,"%d * 2"));this.setStyle("width",this.calculateSize(this.config.radius,"%d * 2"))}});AutoshapeJS.defineShape("Star",{base:"Complex",init:function(a){var b,e;this.mergeAttributes(a);b=[];for(e=0;e<this.config.spikes;e++)b.push({shape:"Triangle",color:this.config.color,height:this.calculateSize(this.config.radius,"%d"),width:this.config.spikewidth,rotate:360/this.config.spikes*e,transformorigin:"50% 100%", position:"absolute",left:this.calculateSize(this.config.radius,"%d - ("+parseInt(this.config.spikewidth)+" / 2)"),top:"0"});arguments.callee._super(this,b)},attributes:{radius:function(a){this.setStyle("height",this.calculateSize(a,"%d * 2"));this.setStyle("width",this.calculateSize(a,"%d * 2"))}},config:{radius:"40px",spikes:5,spikewidth:"10px"},render:function(){arguments.callee._super(this);this.setStyle("height",this.calculateSize(this.config.radius,"%d * 2"));this.setStyle("width",this.calculateSize(this.config.radius, "%d * 2"))}});AutoshapeJS.defineShape("Triangle",{init:function(a){arguments.callee._super(this,a);this.setStyle("border-color","transparent");this.setStyle("height","0");this.setStyle("width","0");this.render()},attributes:{height:function(){this.setStyle("border-bottom-width",this.calculateSize(this.config.height,"%d"))},width:function(){this.config.type==="oblique"?(this.setStyle("border-left-width",this.calculateSize(this.config.width,"%d / 2")),this.setStyle("border-right-width",this.calculateSize(this.config.width, "%d / 2"))):this.config.type==="left"?this.setStyle("border-right-width",this.config.width):this.config.type==="right"&&this.setStyle("border-left-width",this.config.width)},color:"border-bottom-color"},config:{height:"50px",width:"50px",type:"oblique"}});var j=!1,g;if(document.readyState==="complete")return i();if(document.addEventListener)g=function(){document.removeEventListener("DOMContentLoaded",g,!1);i()},document.addEventListener("DOMContentLoaded",g,!1);else if(document.attachEvent){g=function(){document.readyState=== "complete"&&(document.detachEvent("onreadystatechange",g),i())};document.attachEvent("onreadystatechange",g);var m=!1;try{m=window.frameElement===null}catch(n){}document.documentElement.doScroll&&m&&l()}})();