(function(){function h(){i||(AutoshapeJS.attach(),i=!0)}function k(){if(!i){try{document.documentElement.doScroll("left")}catch(b){setTimeout(k,1);return}h()}}window.AutoshapeJS=new function(){var b,c,e,j,g,h;b={SHAPE:/shape-[\S]+/,BORDERRADIUS:/border-(?:(?:top|bottom)-(?:left|right)-){0,1}radius/,CALCULATESIZE:/^(\()?([\d]+)(.*?)(\))?$/,ISATTACHED:/(^|\s)attached(\s|$)/};this.VERSION=".1";this.AUTHOR="Chandler Prall <chandler.prall@gmail.com>";c={Shape:function(){}};c.Shape.prototype.init=function(a){this.mergeAttributes(a); this.element=document.createElement("DIV");this.setStyle("display","inline-block");this.setStyle("border-style","solid");this.setStyle("border-width","0");this.render()};c.Shape.prototype.attributes={rotate:function(a){this.setStyle("rotate",a+"deg")},opacity:"opacity",color:"color",transformorigin:function(a){this.setStyle("transform-origin",a.replace(/\|/g," "))},position:"position",left:function(a){this.setStyle("left",this.calculateSize(a,"%d"))},top:function(a){this.setStyle("top",this.calculateSize(a, "%d"))}};c.Shape.prototype.config={rotate:0,opacity:1,color:"black",transformorigin:"50% 50%",position:"relative",left:"auto",top:"top"};c.Shape.prototype.mergeAttributes=function(a){this.attributes=j(this._extended.attributes,this.attributes);this.config=j(this._extended.config,this.config,typeof a==="object"?a:{})};c.Shape.prototype.setStyle=function(a,f){var d=this.element;if(b.BORDERRADIUS.test(a))return a=h(a),d.style["Moz"+a.charAt(0).toUpperCase()+a.slice(1)]=f,d.style["Webkit"+a.charAt(0).toUpperCase()+ a.slice(1)]=f,d.style[a]=f,!0;if(a==="rotate")return d.style.MozTransform=d.style.WebkitTransform=d.style.OTransform=d.style.msTransform=d.style.transform="rotate("+f+")",!0;if(a==="transform-origin")return d.style.MozTransformOrigin=d.style.WebkitTransformOrigin=d.style.OTransformOrigin=d.style.msTransformOrigin=d.style.transformOrigin=f,!0;d.style[h(a)]=f;return!0};c.Shape.prototype.calculateSize=function(a,f,d){var c,e;if(typeof a==="undefined"||typeof f==="undefined")return!1;c=a.match(b.CALCULATESIZE); if(c===null)return 0;a=c[2];e=c[3].length>0?c[3]:"px";c[1]==="("&&c[4]===")"&&(a*=-1);f=f.replace(RegExp(d||"%d","g"),a);return eval(f)+e};c.Shape.prototype.set=function(a,f){this.config[a]=f;this.render()};c.Shape.prototype.get=function(a){return a in this.config?this.config[a]:this.element.style.getAttribute(a)};c.Shape.prototype.render=function(){var a,f;if(typeof this.element==="undefined")return!1;for(a in this.attributes)switch(f=this.attributes[a],typeof f){case "string":this.setStyle(this.attributes[a], this.config[a]);break;case "function":f.call(this,this.config[a])}};c.Shape.prototype.attachTo=function(a){if(typeof a==="undefined")return!1;typeof a==="string"&&(a=document.getElementById(a));if(typeof a.appendChild==="undefined")return!1;a.appendChild(this.element)};e=function(a,f){var d,b,c;if(typeof a!=="function"||typeof a.prototype==="undefined")return!1;if(typeof f!=="object")return!1;d=function(){};d.prototype=new a;d.prototype._extended=a.prototype;for(b in f)c=f[b],d.prototype[b]=c,typeof c=== "function"&&typeof a.prototype[b]!=="undefined"&&function(a,b,d){a.prototype[d]._super=function(a){var f=Array.prototype.slice.call(arguments,1);b.prototype[d].apply(a,f)}}(d,a,b);return d};j=function(){var a,b,d,c={};for(a=0;a<arguments.length;a++)if(b=arguments[a],typeof b==="object")for(d in b)c[d]=b[d];return c};g=function(a){var b={},a=a.split("-"),d,c;a.shift();d=a.shift();if(typeof d==="undefined")return!1;b.shape=d[0].toUpperCase()+d.substr(1).toLowerCase();for(d=0;d<a.length;d++)c=a[d],c= c.split(":"),c.length===2&&(b[c[0]]=c[1]);return b};h=function(a){return a.replace(/-(\w)/g,function(a,b){return b.toUpperCase()})};this.defineShape=function(a,b){if(typeof c[a]!=="undefined")return!1;c[a]=e(c[typeof b.base==="undefined"?"Shape":b.base],b)};this.createShape=function(a){typeof a==="string"&&(a=g(a));if(typeof a.shape==="undefined")return!1;if(typeof c[a.shape]==="undefined")return!1;var b=new c[a.shape];b.init(a);return b};this.attach=function(){var a,c,d,e;if(typeof document.getElementsByClassName=== "undefined")return!1;a=document.getElementsByClassName("autoshape");for(c=0;c<a.length;c++)if(d=a[c],(e=d.className.match(b.SHAPE))&&!b.ISATTACHED.test(d.className))e=this.createShape(e[0]),typeof e.attachTo!=="undefined"&&(e.attachTo(d),d.className+=" attached")}};AutoshapeJS.defineShape("Box",{attributes:{height:"height",width:"width",color:"background-color",borderwidth:"border-width",bordercolor:"border-color"},config:{height:"30px",width:"50px",borderwidth:"0px",bordercolor:"black"}});AutoshapeJS.defineShape("Circle", {attributes:{radius:function(b){this.setStyle("height",this.calculateSize(b,"%d * 2"));this.setStyle("width",this.calculateSize(b,"%d * 2"));this.setStyle("border-radius",this.calculateSize(b,"%d"))},color:"background-color",borderwidth:"border-width",bordercolor:"border-color"},config:{radius:"25px",borderwidth:"0px",bordercolor:"black"}});AutoshapeJS.defineShape("Complex",{init:function(b){var c,e;arguments.callee._super(this);this.setStyle("position","relative");this.children=[];for(c=0;c<b.length;c++)e= b[c],e=AutoshapeJS.createShape(e),e.attachTo(this.element);this.render()},render:function(){var b;if(!(this.children instanceof Array))return!1;for(b=0;b<this.children.length;b++)this.children[b].render();arguments.callee._super(this)}});AutoshapeJS.defineShape("Eclipse",{attributes:{radius:function(b){this.setStyle("height",this.calculateSize(b,"%d * 2"));this.setStyle("width",this.calculateSize(b,"%d * 2"));this.setStyle("border-radius",b)},color:function(b){b=b.replace(/\|/g," ");this.setStyle("border-color", b)},width:function(b){b=b.replace(/\|/g," ");this.setStyle("border-width",b)}},config:{radius:"25px",width:"1px|0|0|0"}});AutoshapeJS.defineShape("Polygon",{base:"Complex",init:function(b){var c,e,g;this.mergeAttributes(b);c=[];e=this.calculateSize(this.config.radius,"2 * %d * Math.tan(Math.PI/"+this.config.sides+")");for(g=0;g<this.config.sides;g++)c.push({shape:"Box",color:this.config.color,height:this.calculateSize(this.config.radius,"%d"),width:e,rotate:360/this.config.sides*g+180,transformorigin:"50% 100%", position:"absolute",left:this.calculateSize(this.config.radius,"%d - ("+parseInt(e)+" / 2)"),top:"0%"});arguments.callee._super(this,c)},attributes:{radius:function(b){this.setStyle("height",this.calculateSize(b,"%d * 2"));this.setStyle("width",this.calculateSize(b,"%d * 2"))}},config:{radius:"20px",sides:5},render:function(){arguments.callee._super(this);this.setStyle("height",this.calculateSize(this.config.radius,"%d * 2"));this.setStyle("width",this.calculateSize(this.config.radius,"%d * 2"))}}); AutoshapeJS.defineShape("Star",{base:"Complex",init:function(b){var c,e;this.mergeAttributes(b);c=[];for(e=0;e<this.config.spikes;e++)c.push({shape:"Triangle",color:this.config.color,height:this.calculateSize(this.config.radius,"%d"),width:this.config.spikewidth,rotate:360/this.config.spikes*e,transformorigin:"50% 100%",position:"absolute",left:this.calculateSize(this.config.radius,"%d - ("+parseInt(this.config.spikewidth)+" / 2)"),top:"0"});arguments.callee._super(this,c)},attributes:{radius:function(b){this.setStyle("height", this.calculateSize(b,"%d * 2"));this.setStyle("width",this.calculateSize(b,"%d * 2"))}},config:{radius:"40px",spikes:5,spikewidth:"10px"},render:function(){arguments.callee._super(this);this.setStyle("height",this.calculateSize(this.config.radius,"%d * 2"));this.setStyle("width",this.calculateSize(this.config.radius,"%d * 2"))}});AutoshapeJS.defineShape("Triangle",{init:function(b){arguments.callee._super(this,b);this.setStyle("border-color","transparent");this.setStyle("height","0");this.setStyle("width", "0");this.render()},attributes:{height:function(){this.setStyle("border-bottom-width",this.calculateSize(this.config.height,"%d"))},width:function(){this.config.type==="oblique"?(this.setStyle("border-left-width",this.calculateSize(this.config.width,"%d / 2")),this.setStyle("border-right-width",this.calculateSize(this.config.width,"%d / 2"))):this.config.type==="left"?this.setStyle("border-right-width",this.config.width):this.config.type==="right"&&this.setStyle("border-left-width",this.config.width)}, color:"border-bottom-color"},config:{height:"50px",width:"50px",type:"oblique"}});var i=!1,g;if(document.readyState==="complete")return h();if(document.addEventListener)g=function(){document.removeEventListener("DOMContentLoaded",g,!1);h()},document.addEventListener("DOMContentLoaded",g,!1);else if(document.attachEvent){g=function(){document.readyState==="complete"&&(document.detachEvent("onreadystatechange",g),h())};document.attachEvent("onreadystatechange",g);var l=!1;try{l=window.frameElement=== null}catch(m){}document.documentElement.doScroll&&l&&k()}})();